@using Microsoft.EntityFrameworkCore
@using Microsoft.AspNetCore.Mvc.TagHelpers
@using Memochka.Models.MemochkaDbContext
@inject MemochkaContext DbContext
@{
    ViewData["Title"] = "Запропонушка";
    // Top 10 News List
    var top10news = new List<News>()
    {
        new News(1, "Topic 1", "Desc 1", "1"),
        new News(2, "Topic 2", "Desc 2", "12"),
        new News(3, "Topic 3", "Desc 3", "8"),
        new News(4, "Topic 4", "Desc 4", "6"),
        new News(5, "Topic 5", "Desc 5", "11"),
        new News(6, "Topic 6", "Desc 6", "13"),
        new News(7, "Topic 7", "Desc 7", "19"),
        new News(8, "Topic 8", "Desc 8", "15"),
        new News(9, "Topic 9", "Desc 9", "3"),
        new News(10, "Topic 10", "Desc 10", "10"),
        new News(11, "Topic 11", "Desc 11", "11"),
        new News(12, "Topic 12", "Desc 12", "13"),
        new News(13, "Topic 13", "Desc 13", "19"),
        new News(14, "Topic 14", "Desc 14", "114"),
        new News(15, "Topic 15", "Desc 15", "15"),
        new News(16, "Topic 16", "Desc 16", "16")
    };
    int temp = 1;
    var memes = DbContext.Memes
        .OrderByDescending(m => m.Views).Take(5).ToList();
}
<div class="main-container my-5">
    <div class="row border p-3">
        <div class="d-flex align-items-center">
            <h1>Запропонушка</h1>
        </div>
    </div>
    <div class="row">
        @* Modal*@
        <div class="modal fade" id="addPostModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h1 class="modal-title fs-5" id="exampleModalLabel">Додати пост</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body d-flex justify-content-center border p-1">
                        <div style="background: white; width: 50%">
                            <a role="button" asp-action="CreateMemePage" class="d-flex flex-wrap text-center mx-auto btn">
                                <img src="/images/LoginImage.jpg" style="width: 150px;height: 150px" class="mx-auto" />
                                <p style="font-size: 20px; font-weight: 500; padding: 10px 20px; background: black; color: white" class="mt-5 text-center mx-auto">Додати мемчик</p>
                            </a>
                        </div>
                        <div style="background: black; color: white; width: 50%">
                            <a role="button" asp-action="CreateArticlePage" class="d-flex flex-wrap text-center mx-auto btn">
                                <img src="/images/WhitePensil.png" style="width: 150px;height: 150px" class="mx-auto" />
                                <p style="font-size: 20px; font-weight: 500; padding: 10px 20px; background: white; color: black" class="mt-5 text-center mx-auto">Написати статтю</p>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        @*Left Side*@
        <div class="col-xl-8 col-lg-8 col-md-12 d-inline border-end">
            <div class="d-block">
                @for (int i = 0; i < 8; i++)
                {
                    <div class="d-block mb-3 mt-2 w-100">
                        <p class="mb-2 ms-md-2" style="font-size: 30px; font-weight: 600">@top10news[i].Title</p>
                        <img src="/images/ПримерМем2.jpg" style="width: 90%; height: 90%"/>
                        <div class="d-flex mt-3">
                            <img src="/images/Ава дефолт.png" class="me-3 my-auto rounded-circle" style="height: 45px; width: 45px"/>
                            <p class="my-auto" style="font-weight: 600; font-size: 20px">Автор Автор</p>
                            <p class="my-auto ms-2" style="font-size: 13px">12.04.2002 об 13:00</p>
                        </div>
                    </div>
                }
            </div>
        </div>
        @*Right Side*@
        <div class="col-xl-4 col-lg-4 col-md-12 d-inline">
            <div class=" d-block p-2 border mt-3">
                <div class="rounded-circle bg-black mx-auto" style="max-width: 100px; max-height: 100px">
                    <img src="/images/WhitePensil.png" class="p-3"/>
                </div>
                <div class="d-flex mt-3 mb-3 align-content-center flex-wrap">
                    <p class="my-2 mx-auto" style="font-size: 30px; font-weight: 700">Стань автором!</p>
                    <a role="button" data-bs-toggle="modal" data-bs-target="#addPostModal" aria-disabled="true" class="btn btn-dark mt-3 mx-auto" style="font-size: 20px; font-weight: 500; padding: 10px 20px;">Написати пост</a>
                </div>
            </div>
            @*Popular Memes*@
            <div class="justify-content-center text-center mt-5">
                <h4 class="fw-bold ">ПОПУЛЯРНІ МЕМЧИКИ!!!</h4>
                @foreach (var meme in memes)
                {
                    <div class="d-flex justify-content-center">
                        <a class="d-flex text-decoration-none justify-content-center" asp-action="MemePage" asp-route-id="@meme.Id">
                            <div class="card text-light m-3 mb-0 d-flex align-items-center" style="border-width: 0">
                                <img src="@($"/images/memes/{meme.Id}MainImg.jpg")" class="card-img d-block " style="width: 90%; max-height: 100%; max-width: 100%">
                                <div class="card-img-overlay d-flex align-items-start">
                                    <span class="badge bg-primary me-auto ms-2" style="font-size: 19px; border-radius: 50%">@(temp++)</span>
                                </div>
                                <p class="text-black me-auto ms-3 mt-1 mb-0" style="font-size: 17px; font-weight: 600">@meme.Title</p>
                            </div>
                        </a>
                    </div>

                }
            </div>
        </div>
    </div>
</div>
